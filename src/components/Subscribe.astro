---
import Markdown from "./Markdown.astro";

export interface Props {
  heading: string;
  heading_level?: "h2" | "h3" | "h4" | "h5";
  text?: string;
  align?: "left" | "center";
  background?: string;
  account_id: string;
  category_id: string;
}

const {
  heading,
  heading_level = "h2",
  text,
  align = "center",
  background = "white",
  account_id,
  category_id,
} = Astro.props;

const HeadingTag = heading_level;
---

<section class={`bg-${background} padding-y-6 text-${align}`}>
  <div class="grid-container">
    <div class="grid-row">
      <div class={`grid-col-12 margin-x-auto tablet:grid-col-10 ${align !== "center" && "desktop-lg:grid-col-12"}`}>
        {heading && <HeadingTag class="font-heading-xl margin-bottom-2">{heading}</HeadingTag>}
        {text && <Markdown content={text} classes="font-sans-lg line-height-sans-4 margin-bottom-3" inline />}

        <form
          action={`https://public.govdelivery.com/accounts/${account_id}/subscribers/qualify`}
          method="post"
          accept-charset="UTF-8"
          class="margin-top-3 display-flex flex-row flex-justify-center">
          <input type="hidden" name="utf8" value="âœ“" />
          <input type="hidden" name="category_id" id="category_id" value={category_id} />
          <label class="usa-sr-only" for="email">Email address</label>
          <input
            class="usa-input bg-primary-lightest border-primary-light margin-top-0 padding-y-1 maxw-card-lg"
            type="email"
            name="email"
            id="email"
            placeholder="you@agency.gov"
            required
          />
          <input
            class="usa-button margin-0 padding-y-1 radius-left-0 margin-left-neg-1px"
            type="submit"
            name="commit"
            value="Sign up"
          />
        </form>
      </div>
    </div>
  </div>
</section>
